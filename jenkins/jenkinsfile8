pipeline {
    agent any
    triggers {
        cron('H/3 * * * *')  // Run every 3 minutes
    }
    stages {
        stage('Build') {
            steps {
                echo "🔨 Building the project..."
                // Example: compile or package
                sh 'echo Simulating build step'
            }
        }

        stage('Unit Tests') {
            steps {
                echo "🧪 Running unit tests..."
                // Example: pytest, JUnit, Maven test
                sh 'echo Simulating unit tests'
            }
        }

        stage('Static Analysis') {
            steps {
                echo "🔍 Running static code analysis..."
                // Example: linting, SonarQube, style checks
                sh 'echo Simulating static analysis'
            }
        }

        stage('Package') {
            steps {
                echo "📦 Packaging the application..."
                // Example: build a JAR, Docker image, zip, etc.
                sh 'echo Simulating packaging step'
            }
        }

        stage('Deploy') {
            steps {
                echo "🚀 Deploying to staging environment..."
                // Example: deploy to test server or container
                sh 'echo Simulating deployment step'
            }
        }
    }
    post {
        always {
            echo "✅ Pipeline finished (success or failure)."
        }
        success {
            echo "🎉 Build succeeded!"
        }
        failure {
            echo "❌ Build failed!"
        }
    }
}
